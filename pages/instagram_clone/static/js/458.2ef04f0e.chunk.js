"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[458],{2458:function(e,r,t){t.r(r),t.d(r,{default:function(){return m}});var n=t(5861),a=t(9439),u=t(7757),s=t.n(u),o=t(2791),c=t(6871),i=t(3504),l=t(2303),p=t(8155),f=t(6042),d=t(184);function m(){var e=(0,c.s0)(),r=(0,o.useContext)(l.Z).firebase,t=(0,o.useState)(""),u=(0,a.Z)(t,2),m=u[0],h=u[1],x=(0,o.useState)(""),y=(0,a.Z)(x,2),b=y[0],w=y[1],g=(0,o.useState)(""),v=(0,a.Z)(g,2),Z=v[0],j=v[1],k=(0,o.useState)(""),N=(0,a.Z)(k,2),I=N[0],O=N[1],P=(0,o.useState)(""),C=(0,a.Z)(P,2),S=C[0],E=C[1],U=""===I||""===Z,D=function(){var t=(0,n.Z)(s().mark((function t(n){var a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,(0,f.$K)(m);case 3:if(0!==t.sent.length){t.next=25;break}return t.prev=5,t.next=8,r.auth().createUserWithEmailAndPassword(Z,I);case 8:return a=t.sent,t.next=11,a.user.updateProfile({displayName:m});case 11:return t.next=13,r.firestore().collection("users").add({userId:a.user.uid,username:m.toLowerCase(),fullName:b,emailAddress:Z.toLocaleLowerCase(),following:[],dateCreated:Date.now()});case 13:e(p.h1),t.next=23;break;case 16:t.prev=16,t.t0=t.catch(5),w(""),j(""),O(""),h(""),E(t.t0.message);case 23:t.next=26;break;case 25:E("That username is already taken, please try another");case 26:case"end":return t.stop()}}),t,null,[[5,16]])})));return function(e){return t.apply(this,arguments)}}();return(0,o.useEffect)((function(){document.title="Sign Up - Instagram"}),[]),(0,d.jsxs)("div",{className:"container flex mx-auto h-screen max-w-screen-md items-center",children:[(0,d.jsx)("div",{className:"flex w-3/5",children:(0,d.jsx)("img",{src:"./images/iphone-with-profile.jpg",alt:"iPhone with instagram app"})}),(0,d.jsxs)("div",{className:"flex flex-col w-2/5",children:[(0,d.jsxs)("div",{className:"flex flex-col item-center bg-white p-4 mb-4 border rounded border-gray-primary",children:[(0,d.jsx)("h1",{className:"flex justify-center w-full",children:(0,d.jsx)("img",{src:"./images/logo.png",alt:"instagram logo",className:"mt-2 w-6/12 mb-4"})}),S&&(0,d.jsx)("p",{className:"mb-4 text-xs text-red-primary",children:S}),(0,d.jsxs)("form",{onSubmit:D,autoComplete:"off",method:"POST",children:[(0,d.jsx)("input",{"aria-label":"Enter your email address",type:"text",placeholder:"Email Address",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2 bg-gray-background",onChange:function(e){return j(e.target.value)},value:Z,autoComplete:"off"}),(0,d.jsx)("input",{"aria-label":"Enter your full name",type:"text",placeholder:"Full Name",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2 bg-gray-background",onChange:function(e){return w(e.target.value)},value:b,autoComplete:"off"}),(0,d.jsx)("input",{"aria-label":"Enter your username",type:"text",placeholder:"Username",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2 bg-gray-background",onChange:function(e){return h(e.target.value)},value:m,autoComplete:"off"}),(0,d.jsx)("input",{"aria-label":"Enter your password",type:"password",placeholder:"Password",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2 bg-gray-background",onChange:function(e){var r=e.target;return O(r.value)},value:I,autoComplete:"off"}),(0,d.jsx)("button",{disabled:U,type:"submit",className:"bg-blue-medium text-white w-full rounded h-8 font-bold ".concat(U&&"opacity-50"," "),children:"Sign Up"})]})]}),(0,d.jsx)("div",{className:"flex justify-center items-center flex-col w-full bg-white p-4 border rounded border-gray-primary",children:(0,d.jsxs)("p",{className:"text-sm",children:["Have an account? ","",(0,d.jsx)(i.rU,{to:p.ym,className:"font-bold text-blue-medium",children:"Sign In"})]})})]})]})}},6042:function(e,r,t){t.d(r,{$K:function(){return i},wP:function(){return v},ve:function(){return h},xD:function(){return d},dQ:function(){return p},_T:function(){return j},IU:function(){return N},Gm:function(){return O},NS:function(){return y},vF:function(){return w}});var n=t(9439),a=t(1413),u=t(5861),s=t(7757),o=t.n(s),c=t(5306);t(9692);function i(e){return l.apply(this,arguments)}function l(){return(l=(0,u.Z)(o().mark((function e(r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.w.firestore().collection("users").where("username","==",r).get();case 2:return t=e.sent,console.log("result",t),e.abrupt("return",t.docs.map((function(e){return e.data().length>0})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=(0,u.Z)(o().mark((function e(r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.w.firestore().collection("users").where("username","==",r).get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return(m=(0,u.Z)(o().mark((function e(r){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.w.firestore().collection("users").where("userId","==",r).get();case 2:return t=e.sent,n=t.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,r){return x.apply(this,arguments)}function x(){return(x=(0,u.Z)(o().mark((function e(r,t){var n,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.w.firestore().collection("users").get();case 2:return n=e.sent,u=n.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})).filter((function(e){return e.userId!==r&&!t.includes(e.userId)})),e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,r,t){return b.apply(this,arguments)}function b(){return(b=(0,u.Z)(o().mark((function e(r,t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.w.firestore().collection("users").doc(r).update({following:n?c.G.arrayRemove(t):c.G.arrayUnion(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,r,t){return g.apply(this,arguments)}function g(){return(g=(0,u.Z)(o().mark((function e(r,t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.w.firestore().collection("users").doc(r).update({followers:n?c.G.arrayRemove(t):c.G.arrayUnion(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,r){return Z.apply(this,arguments)}function Z(){return Z=(0,u.Z)(o().mark((function e(r,t){var n,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.w.firestore().collection("photos").where("userId","in",t).get();case 2:return n=e.sent,s=n.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),e.next=6,Promise.all(s.map(function(){var e=(0,u.Z)(o().mark((function e(t){var n,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,t.likes.includes(r)&&(n=!0),e.next=4,d(t.userId);case 4:return u=e.sent,s=u[0].username,e.abrupt("return",(0,a.Z)((0,a.Z)({username:s},t),{},{userLikedPhoto:n}));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function j(e){return k.apply(this,arguments)}function k(){return(k=(0,u.Z)(o().mark((function e(r){var t,u,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(r);case 2:return t=e.sent,u=(0,n.Z)(t,1),s=u[0],e.next=7,c.w.firestore().collection("photos").where("userId","==",s.userId).get();case 7:return i=e.sent,e.abrupt("return",i.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,r){return I.apply(this,arguments)}function I(){return(I=(0,u.Z)(o().mark((function e(r,t){var u,s,i,l,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.w.firestore().collection("users").where("username","==",r).where("following","array-contains",t).get();case 2:return u=e.sent,s=u.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),i=(0,n.Z)(s,1),l=i[0],p=void 0===l?{}:l,e.abrupt("return",p.userId);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,r,t,n,a){return P.apply(this,arguments)}function P(){return(P=(0,u.Z)(o().mark((function e(r,t,n,a,u){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t,a,r);case 2:return e.next=4,w(n,u,r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1413:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(4942);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}}}]);
//# sourceMappingURL=458.2ef04f0e.chunk.js.map