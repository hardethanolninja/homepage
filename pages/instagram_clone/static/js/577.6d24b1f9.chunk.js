"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[577],{3577:function(e,s,t){t.r(s),t.d(s,{default:function(){return v}});var n=t(5861),r=t(9439),l=t(7757),a=t.n(l),c=t(6871),o=t(2791),i=t(8155),u=t(5837),d=t(6839),f=t(6920),m=t(6042),h=t(184);function x(e){var s=e.photosCount,t=e.profile,l=t.docId,c=t.userId,i=t.fullName,u=t.followers,x=void 0===u?[]:u,p=t.following,j=void 0===p?[]:p,g=t.username,w=e.followerCount,v=e.setFollowerCount,N=(0,f.Z)().user,b=(0,o.useState)(),y=(0,r.Z)(b,2),Z=y[0],k=y[1],C=N.username&&N.username!==g,I=function(){var e=(0,n.Z)(a().mark((function e(s){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.persist(),v(Z?w-1:w+1),k((function(e){return!e})),e.next=5,(0,m.Gm)(Z,N.docId,l,c,N.userId);case 5:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){k((function(e){return!e}));var e=function(){var e=(0,n.Z)(a().mark((function e(){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.IU)(N.username,c);case 2:s=e.sent,k(!!s);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();N.username&&c&&e()}),[N.username,c]),(0,h.jsxs)("div",{className:"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg",children:[(0,h.jsx)("div",{className:"container flex justify-center",children:(0,h.jsx)("img",{className:"rounded-full h-40 w-40 flex",alt:"".concat(g," profile picture"),src:"jon"===g||"orwell"===g||"dali"===g||"raphael"===g||"candy"===g?"./images/avatars/".concat(g,".jpg"):"./images/avatars/default.png"})}),(0,h.jsxs)("div",{className:"flex items-center justify-center flex-col col-span-2",children:[(0,h.jsxs)("div",{className:"container flex items-center",children:[(0,h.jsx)("p",{className:"text-2xl mr-4",children:g}),C&&(0,h.jsx)("button",{className:"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8",type:"button",onClick:I,children:Z?"Unfollow":"Follow"})]}),(0,h.jsx)("div",{className:"container flex mt-4",children:void 0===x||void 0===j?(0,h.jsx)(d.Z,{count:1,width:677,height:24}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("p",{className:"mr-10",children:[(0,h.jsxs)("span",{className:"font-bold",children:[s," "]}),"photos"]}),(0,h.jsxs)("p",{className:"mr-10",children:[(0,h.jsxs)("span",{className:"font-bold",children:[w," "]}),1===w?"follower":"followers"]}),(0,h.jsxs)("p",{className:"mr-10",children:[(0,h.jsxs)("span",{className:"font-bold",children:[j.length," "]}),"following"]})]})}),(0,h.jsx)("div",{className:"container mt-4",children:(0,h.jsx)("p",{className:"font-medium",children:i||(0,h.jsx)(d.Z,{count:1,height:24})})})]})]})}var p=t(4539),j=t(8260);function g(e){var s=e.photos;return console.log("photos",s),(0,h.jsxs)("div",{className:"h-16 border-t border-gray-primary mt-12 pt-4",children:[(0,h.jsx)("div",{className:"grid grid-cols-3 gap-8 mt-4 mb-12",children:s?s.length>0?s.map((function(e){return(0,h.jsxs)("div",{className:"relative group",children:[(0,h.jsx)("img",{src:e.imageSrc,alt:e.caption,className:"h-full object-cover"}),(0,h.jsx)("div",{className:" hover:opacity-100 opacity-0 absolute bottom-0 left-0 bg-gray-200 z-10 w-full justify-evenly items-center h-full bg-black-faded",children:(0,h.jsxs)("div",{className:" flex flex-col align-start w-full h-full",children:[(0,h.jsxs)("p",{className:" flex mt-2 ml-2 text-white font-bold",children:[(0,h.jsx)(p.Z,{className:" h-6 w-6 mr-1 fill-white"}),e.likes.length]}),(0,h.jsxs)("p",{className:"flex mt-2 ml-2 text-white font-bold",children:[(0,h.jsx)(j.Z,{className:" h-6 w-6 mr-1 fill-white"}),e.comments.length]})]})})]},e.docId)})):null:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(d.Z,{count:12,width:320,height:400})})}),!s||0===s.length&&(0,h.jsx)("p",{className:"text-center text-2xl",children:"No Posts Yet"})]})}function w(e){var s=e.user,t=(0,o.useState)({}),l=(0,r.Z)(t,2),c=l[0],i=l[1],u=(0,o.useState)([]),d=(0,r.Z)(u,2),f=d[0],p=d[1],j=(0,o.useState)(0),w=(0,r.Z)(j,2),v=w[0],N=w[1];return(0,o.useEffect)((function(){function e(){return(e=(0,n.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m._T)(s.username);case 2:t=e.sent,i(s),p(t),N(s.followers.length),console.log("initial follower count",v);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.username&&function(){e.apply(this,arguments)}()}),[s.username]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(x,{photosCount:f?f.length:0,profile:c,followerCount:v,setFollowerCount:N}),(0,h.jsx)(g,{photos:f})]})}function v(){var e=(0,c.UO)().username,s=(0,o.useState)(!1),t=(0,r.Z)(s,2),l=t[0],d=t[1],f=(0,o.useState)(null),x=(0,r.Z)(f,2),p=x[0],j=x[1],g=(0,c.s0)();return(0,o.useEffect)((function(){function s(){return s=(0,n.Z)(a().mark((function s(){var t,n,l;return a().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,m.dQ)(e);case 2:t=s.sent,n=(0,r.Z)(t,1),(l=n[0]).userId?(j(l),d(!0)):g(i.Hi);case 6:case"end":return s.stop()}}),s)}))),s.apply(this,arguments)}!function(){s.apply(this,arguments)}()}),[e,g]),l?(0,h.jsxs)("div",{className:"bg-gray-background",children:[(0,h.jsx)(u.Z,{}),(0,h.jsx)("div",{className:"mx-auto max-w-screen-lg",children:(0,h.jsx)(w,{user:p})})]}):null}}}]);
//# sourceMappingURL=577.6d24b1f9.chunk.js.map